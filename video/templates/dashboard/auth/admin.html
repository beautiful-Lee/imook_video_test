<%inherit file="../base.html" />
<%def name="title()">
Dashboard Admin
</%def>
<%def name="css()">
<link href="/static/dashboard/css/admin.css" rel="stylesheet">
</%def>
<%def name="content()">
<% from django.shortcuts import reverse %>
<h1>Admin</h1>

<table class="table">
    <thead>
    <tr>
        <th>用户名</th>
        <th>是否是管理员</th>
        <th>邮箱</th>
        <th>最后登录时间</th>
        <th>编辑</th>
    </tr>
    </thead>
    <tbody>
        % for user in users:
        <tr>
        <td>${user.username}</td>
        <td>${user.is_superuser}</td>
        <td>${user.email}</td>
        <td>${user.last_login}</td>
        % if user.is_superuser:
        <td><a href="${reverse('dashboard_admin_status')}?update_username=${user.username}" >取消管理员</a></td>
        % else:
        <td><a href="${reverse('dashboard_admin_status')}?update_username=${user.username}" >设置管理员</a></td>
        % endif
        </tr>
        % endfor
    </tbody>
</table>

<div class="pagination">
    <span class="span-links">
        % if users.number != 1:
            <a href="?page=1">首页</a>
        % else :
            <span class="current">首页</span>
        % endif
        % if users.has_previous() :
            <a href="?page=${users.previous_page_number()}">上一页</a>
        % else :
        <span class="current">上一页</span>
        % endif

        % for i in page_range:
            % if i != users.number:
                <a href="?page=${i}">${i}</a>
            % else:
                <span class="current">${i}</span>
            % endif
        % endfor

        % if users.has_next():
            <a href="?page=${users.next_page_number()}">下一页</a>
        % else :
        <span class="current">下一页</span>
        % endif

        % if users.number != page_range[-1]:
            <a href="?page=${users.paginator.num_pages}">尾页</a>
        % else :
            <span class="current">尾页</span>
        % endif
    </span>
</div>

</%def>